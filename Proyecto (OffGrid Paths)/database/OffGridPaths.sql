-- Tabla Users
CREATE TABLE Users (
    UserID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Username VARCHAR2(50) NOT NULL UNIQUE,
    PasswordHash VARCHAR2(255) NOT NULL,
    Email VARCHAR2(100) NOT NULL UNIQUE
);

-- Tabla Montana
CREATE TABLE Montana (
    MontanaID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Nombre VARCHAR2(100) NOT NULL,
    Altura NUMBER(7,2) NOT NULL,
    Ubicacion VARCHAR2(100) NOT NULL,
    Descripcion VARCHAR2(255)
);

-- Tabla Ruta
CREATE TABLE Ruta (
    RutaID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MontanaID NUMBER NOT NULL,
    Dificultad VARCHAR2(20) CHECK (Dificultad IN ('Facil', 'Intermedia', 'Dificil')) NOT NULL,
    Descripcion VARCHAR2(255),
    Distancia NUMBER(7,2) NOT NULL,
    FOREIGN KEY (MontanaID) REFERENCES Montana(MontanaID) ON DELETE CASCADE
);

-- Tabla relaci√≥n entre Usuarios y Rutas
CREATE TABLE UsuarioRutaGuardada (
    UserID NUMBER NOT NULL,
    RutaID NUMBER NOT NULL,
    PRIMARY KEY (UserID, RutaID),
    FOREIGN KEY (UserID) REFERENCES Users(UserID) ON DELETE CASCADE,
    FOREIGN KEY (RutaID) REFERENCES Ruta(RutaID) ON DELETE CASCADE
);
